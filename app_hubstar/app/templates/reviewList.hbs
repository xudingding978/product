

<div class="review-list-container">
    {{#each reviews}} 
    <div id="reviewList"  class="review-list box" style="">
        <div class="review-list-profile-pic" style="">
            <img {{bindAttr src="this.review_user_photo_url"}} id="leftOrRight" style=""/>
        </div>

        <div  class="review-list-content easing" style="">
            <div style="background-color: #f3f3f3;padding: 5px 5px 5px 70px;">
                <div {{action 'downContent' this.review_id target='view' on="click"}} class="comment-namentime" style="display: block;position: relative;height: 35px;">
                    <div class="namentime_position" style="margin: 0;float: left;">
                        <a class="comment-username" href="#/users/{{unbound this.review_user_id}}"  >
                           {{this.review_user_name}} 
                    </a>
                    <div class="posttime-container">
                        <span class="posttime">{{date this.review_time_stamp}} </span>
                    </div>
                </div>

                <div style="position: absolute; right: 0; margin: 7px;"><span class="starsview" ><span style="width:{{unbound this.review_length}}px;"></span></span></div>
            </div>
        </div>

        <div  style="background-color: #fff; padding: 5px 0 0 70px; font-size: 13px;">
            <div id="review_content_{{unbound this.review_id}}" {{action 'upContent' this.review_id target='view' on="click"}} style="width: 390px; height:20px; position: relative; display: inline-block; overflow: hidden; ">{{this.review_content}}  </div>   
           <div id="review_like_{{unbound this.review_id}}"  style="display: inline-block;float: right; font-size: 13px;" class="new-btn" {{action addLike this}}><i class="icon-thumbs-up-alt" {{action addLike this}}>&nbsp</i>{{this.review_like_count}}</div>
           <div id="review_replay_{{unbound this.review_id}}"  style="display: inline-block;float: right; font-size: 13px;" class="new-btn" ><i class="icon-reply" >&nbsp</i></div>           

            <span role="button"  style="position: relative;  font-size: 18px; color: #888;margin: 0 10px;"  id="down_button_{{unbound this.review_id}}"  ><k class="icon-caret-down"></k></span>
            <span role="button" style="position: relative; display: none;  font-size: 18px; color: #888;margin: 0 10px;"  id="up_button_{{unbound this.review_id}}" ><k class="icon-caret-up"></k></span>
        </div>
    </div>



</div>


{{/each}}



</div>
<script>
    $(function() {
        var $container = $('#masonry_user_container');
        window.setTimeout(function() {
            $container.masonry();
            $container.masonry('reloadItems');
        }, 10);
    });


</script>






 <!--the following comment-frame is used to show the reply box for the second level reply-->
    <div id="reviewData_{{unbound model.review_id}}"  style="display: block;">
        {{#if model.replyEdit}}
        <div class="reply-comment-frame"  style="">
            <div style="margin:0 auto; padding: 0 45px 15px 0;">
                <a  href="#/users/{{unbound this.review_user_id}}">
                    <img class="profilepic_comment"  style="float: right; margin: 4px -45px 0 0; margin-top: 0;"{{bindAttr src="this.review_user_photo_url"}} /> 
                    <div class='user-reply-angle-before'></div>
                    <div class='user-reply-angle-after'></div>
                </a>

                <div class="reply-comment-container" style="width: 382px;height: 32px;">
                    <div style="margin: 0;width: 320px; height: 30px;float: left;">
                        {{view Ember.TextField valueBinding="replyContent" class="no-resize" placeholder="What's up!" }}                                          
                    </div>
                    <div style="float: right;height: 34px;position: relative;">
                        <div  class="message-btn easing" style="width:30px; border-right: 1px solid #ddd; border-left: 1px solid #ddd;"><k class='icon-picture'></k>
                            <div style="opacity:0;position: relative;height:30px;top:-30px;overflow: hidden;"> 
                                {{view HubStar.SingleImageInputButtonView }}
                            </div>
                        </div>
                        {{#if controller.isReply}}
                        <div class="message-btn easing" style='width: 30px;'{{action addReviewReply model.review_id}}>
                             <k class='icon-ok'></k>
                        </div>
                        {{else}}
                        <div class="message-btn easing" style='width: 30px;'>
                             <k class='icon-ok'></k>
                        </div>
                        {{/if}}
                    </div>
                </div>

                <!--please disable the following div when it's got not content-->
                {{#if controller.isUploadPhoto}}
                <div style='width: 380px;max-height: 100px;padding: 10px 12px;text-align: center;background-color: #fff;border-radius: 0 0 3px 3px;border: 1px solid #ddd;border-top: none;'>
                    <div class='remove-comment-photo easing' ><i class="icon-remove"></i></div>
                    <img  {{bindAttr src= "newStyleImageSource"}}  style="max-height: 80px;max-width: 300px">
                </div>
                {{/if}}
            </div>
        </div>
        {{/if}}
        <!--output each the second level reply-->
        {{#each  model.replyReviewCollection}} 
        {{#unless this.enableToEdit}}
        <div class="your-relpy">
            <a class="your-relpy_profilepic" href="#/users/{{unbound this.review_user_id}}">
                <img class="profilepic_comment"  {{bindAttr src= this.review_photo_url_large}} />
            </a>
            <div style="">
                <div class="comment-namentime">
                    <div class="namentime_position">
                        {{#if this.isUserself}}
                        <div class="reply-comment" style="left: 40px;right: initial;">
                            <i class="icon-trash"  {{action removeReviewReply this.review_reply_id}}></i>
                            <i class="icon-pencil" {{action editingReviewReplyData this.review_reply_id this.review_msg}}></i>
                        </div>
                        {{else}}
                        {{#if controller.isUserself}}
                        <div class="reply-comment" style="left: 40px;right: initial;">                        
                            <i class="icon-trash"  {{action removeReply this.review_reply_id}}></i>
                            <i class="icon-pencil" {{action editingReplyData this.review_reply_id this.review_msg}}></i>
                        </div>
                        {{/if}}
                        {{/if}}
                        <a class="comment-username"  href="#/users/{{unbound this.review_user_id}}">
                            {{this.review_user_name}}    {{controller.isEdit}}                
                        </a>
                        <div class="posttime-container">
                            <span class="posttime">{{this.review_time_stamp}}</span>
                        </div>
                    </div>
                </div>
                <div class="comment-content">
                    {{this.review_msg}}<br>
                    {{#if this.isUrl }}   <!-- if the isUrl is not null which mean it has the picture url, so it can show the image-->
                    <div style='margin: 5px auto;max-width: 300px;max-height: 300px;float: right;'>
                        <img {{bindAttr src= this.review_url}} style="border: 4px solid #fff;"/>
                    </div>
                    {{/if}}
                </div>
            </div>
        </div>
        {{else}}

        {{render editReply this}}
        {{/unless}}


        {{/each}}         
    </div>

<script>
    $(function() {
        var $container = $('#masonry_user_container');
        window.setTimeout(function() {
            $container.masonry();
            $container.masonry('reloadItems');
        }, 10);
    });
</script>

